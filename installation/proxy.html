<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snipe-IT Documentation</title>
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="http://docs.snipeitapp.com/css/theme.css" type="text/css"/>
    <link rel="stylesheet" href="http://docs.snipeitapp.com/css/theme-fixes.css" type="text/css"/>
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/github.min.css">

    <link href="//fonts.googleapis.com/css?family=Open+Sans:300,400" rel="stylesheet">
    <link href="http://docs.snipeitapp.com/css/tipuesearch.css" rel="stylesheet">





</head>
<body class="wy-body-for-nav">

    <div class="wy-grid-for-nav">

        <nav data-toggle="wy-nav-shift" class="wy-nav-side">
            <div class="wy-side-nav-search">
                <a href="http://docs.snipeitapp.com/"><i class="fa fa-home"></i> Snipe-IT Documentation</a>
            </div>
            <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                
                <form action="http://docs.snipeitapp.com/search.html">
                <input type="text" name="q" id="tipue_search_input"  list="search" placeholder="Search the docs" required>

                <datalist id="search">
                <option>Installation</option>
                <option>User's Manual</option>
                <option>Common Issues</option>
                <option>Getting Help</option>
                </datalist>
                </form>

                                            <p class="menu-section">
                            
                        </p>

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/index.html">
                                        Introduction
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/requirements.html">
                                        Requirements
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/security.html">
                                        Security
                                    </a>
                                </li>
                                                    </ul>
                                            <p class="menu-section">
                            <i class="fa fa-cog"></i> Installation
                        </p>

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/index.html">
                                        Overview
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/downloading.html">
                                        1. Downloading
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/configuration.html">
                                        2. Configuration
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/composer.html">
                                        3. Install Dependencies
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/command-line.html">
                                        4. The CLI Installer
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/server/index.html">
                                        5. Server Configuration
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/server/linux-osx.html">
                                        <span class='subnav-indent'><i class='fa fa-caret-right'></i> Linux/OSX</span>
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/server/windows.html">
                                        <span class='subnav-indent'><i class='fa fa-caret-right'></i> Windows</span>
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/server/wamp.html">
                                        <span class='subnav-indent'><i class='fa fa-caret-right'></i> WAMP</span>
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/server/xampp.html">
                                        <span class='subnav-indent'><i class='fa fa-caret-right'></i> XAMPP</span>
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/server/docker.html">
                                        <span class='subnav-indent'><i class='fa fa-caret-right'></i> Docker</span>
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/subdirectory.html">
                                        Subdirectories
                                    </a>
                                </li>
                                                            <li class="navitems active">
                                    <a href="http://docs.snipeitapp.com/installation/proxy.html">
                                        Using a Reverse Proxy
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/installation/manually-editing-data.html">
                                        Manually Editing Data
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/upgrading.html">
                                        Upgrading
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/contributing.html">
                                        Contributing
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/translations.html">
                                        Translations
                                    </a>
                                </li>
                                                    </ul>
                                            <p class="menu-section">
                            <i class='fa fa-life-ring'></i> Help
                        </p>

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/common-issues.html">
                                        Common Issues
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/getting-help.html">
                                        Getting Help
                                    </a>
                                </li>
                                                    </ul>
                                            <p class="menu-section">
                            <i class='fa fa-book'></i> User's Manual
                        </p>

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/manual/index.html">
                                        Basic Concepts
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/manual/user-management/index.html">
                                        User Management
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/manual/importing-assets.html">
                                        Importing Assets
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/manual/importing-licenses.html">
                                        Importing Licenses
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/manual/alerts.html">
                                        Configuring Alerts
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/manual/labels.html">
                                        Generating Labels
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/manual/backups.html">
                                        Backups
                                    </a>
                                </li>
                                                    </ul>
                                            <p class="menu-section">
                            
                        </p>

                        <ul class="nav nav-pills nav-stacked">
                                                            <li class="navitems">
                                    <a href="http://docs.snipeitapp.com/license.html">
                                        License
                                    </a>
                                </li>
                                                            <li class="navitems">
                                    <a href="http://snipeitapp.com">
                                        Main Website
                                    </a>
                                </li>
                                                    </ul>
                                                </div>
            &nbsp;
        </nav>

        <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

                        <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
                <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
                <a href="http://docs.snipeitapp.com/">Snipe-IT Documentation</a>
            </nav>


                                        <a href="https://github.com/snipe/snipe-it">
                    <img style="position: absolute; top: 0; right: 0; border: 0; max-width: 150px;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
                </a>
            
            <div class="wy-nav-content">
                <div class="rst-content">
                    <div role="main" class="document">
                        <h1 id="running-snipe-it-through-a-reverse-proxy">Running Snipe-IT Through a Reverse Proxy</h1>
<div id="generated-toc" class="generate_from_h2"></div>
<p>If you wish to use a Reverse Proxy in front of your web server, you'll need to take a few extra steps to make it work.</p>
<p>A typical Reverse Proxy scenario looks like this:</p>
<p>`Internet -&gt; Proxy Server (Public &amp; Private IPs) -&gt; Web Server (Private IPs)``</p>
<p>The Proxy server is functioning as a reverse proxy (Nginx, Squid, Apache's Mod_Proxy, or Varnish).</p>
<p>In most deployments the Proxy will perform HTTP to HTTPS redirection and only pass requests and responses via HTTPS to the remote client. All communication between the Proxy and the Web Server occurs over HTTPS.</p>
<p>With This Scenario: <strong>Has Issue</strong>
<code>Client &lt;-HTTPS-&gt; Proxy &lt;-HTTP-&gt; Web Server</code></p>
<p>With This Scenario: <strong>Has Issue in Reverse</strong>
<code>Client &lt;-HTTP-&gt; Proxy &lt;-HTTPS-&gt; Web Server</code></p>
<p>With This Scenario: <strong>No Issue</strong>
<code>Client &lt;-HTTP-&gt; Proxy &lt;-HTTP-&gt; Web Server</code>
<code>Client &lt;-HTTPS-&gt; Proxy &lt;-HTTPS-&gt; Web Server</code></p>
<h2 id="the-issues">The Issues</h2>
<p>In the above scenario the generated HTML will reference <code>http://</code> instead of <code>https://</code> for all assets. This causes most browsers to throw security warnings and refuse to display the content. (Typically, you'll see mixed content warnings because the browser won't load insecure elements on an SSL page.)</p>
<p><strong>This assumes that your Proxy and Web Server are correctly configured and working properly. Meaning you have other correctly functioning Applications behind the proxy and the Web Server for Snipe-IT works properly if accessed directly.</strong></p>
<p>Laravel is unaware that requests to the proxy are being handled through HTTPS instead of HTTP. As such no effort is made to generate HTTPS links for Assets.</p>
<h2 id="proxy-configuration">Proxy Configuration</h2>
<p>Laravel needs to be made aware of the presence of the Proxy Server. The <code>X-Forwarded-Proto</code> header should be passed from the Proxy to the Web Server.</p>
<h3 id="server-configuration">Server Configuration</h3>
<p>In Nginx, you would address</p>
<pre><code>proxy_set_header X-Forwarded-Proto $scheme;</code></pre>
<p>With Apache's Mod_Proxy, you would add</p>
<pre><code>RequestHeader set X-Forwarded-Proto "https"</code></pre>
<p>to your virtual host configuration.</p>
<h3 id="proxy-configurations-in-snipe-it">Proxy Configurations in Snipe-IT</h3>
<p>Copy the <code>app/config/packages/fideloper/proxy/config.example.php</code> to <code>app/config/packages/fideloper/proxy/config.php</code>, and change</p>
<pre><code>'proxies' =&gt; '*'</code></pre>
<p>to</p>
<pre><code>'proxies' =&gt; array('YOUR.IP.GOES.HERE'),</code></pre>
<p>obviously replacing <code>YOUR.IP.GOES.HERE</code> with your actual IP address. Note that IPs and CIDR Notation are accepted.</p>
                    </div>

                    <hr/>
                    <div class="blue-alert">
                            <div style="float: left; padding-right: 10px">
                                <i class="fa fa-exclamation-triangle fa-3x"></i>
                            </div>
                            <div style="float: left;">
                            <strong>
                                See an error in this documentation?
                            </strong>
                            <br>Submit a pull request on the <a href="https://github.com/snipe/snipe-it/tree/documentation">documentation branch</a> of <a href="https://github.com/snipe/snipe-it">Snipe-IT</a>.
                        </div>
                        <div class="clear"></div>
                    </div>



                    <footer>
                        <small>
                            <a href="http://snipeitapp.com">Snipe-IT</a> is a free open source project by <a href="https://twitter.com/snipeyhead">@snipeyhead</a>. This documentation was built using <a href="http://couscous.io/">Couscous</a> using a <a href="https://github.com/CouscousPHP/Template-ReadTheDocs">theme</a> inspired by <a href="https://readthedocs.org/">Read the Docs</a>.
                        </small>
                    </footer>

                </div>
            </div>

        </section>

    </div>

    <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
    <script src="http://docs.snipeitapp.com/js/theme.js"></script>
    <script type="text/javascript" src="http://docs.snipeitapp.com/js/generated-toc.js">

    <script>
        $(function() {
            // Syntax highlighting
            hljs.initHighlightingOnLoad();
        });
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    



</body>
</html>
